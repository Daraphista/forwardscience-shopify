<!-- /templates/customers/register.liquid -->
<div class="full__page__form__wrapper">
  <div class="wrapper">
    <div class="grid">
      <div class="grid__item medium-up--one-half medium-up--push-one-quarter text-center">
        <div class="full__page__form">
          <h1 class="account__form__title">{{ 'customer.register.title' | t }}</h1>

          <style>
            .pro-only-alert {
              border-radius: 6px;
              border-color: #2b9486;
              border-width: 3px;
              padding: 14px 20px;
              margin-bottom: 14px;
              color: #3a6b64;
              background-color: #bee0db;
            }
          </style>
          <!-- REVERT -->
          <div class="pro-only-alert">
            <b>Account Requirements:</b><br>
            Products only available to medical professionals. NPI or license number required. Non-professional orders
            will not be fulfilled.
          </div>

          {% form 'create_customer', id: 'CreateCustomerForm', onSubmit: 'handleCreateCustomerFormSubmit(event)' %}
            {{ form.errors | default_errors }}

            <div class="float__wrapper">
              <label for="FirstName">{{ 'customer.register.first_name' | t }}</label>
              <input
                type="text"
                name="customer[first_name]"
                id="FirstName"
                placeholder="{{ 'customer.register.first_name' | t }}"
                {% if form.first_name %}
                  value="{{ form.first_name }}"
                {% endif %}
                autofocus
              >
            </div>

            <div class="float__wrapper">
              <label for="LastName">{{ 'customer.register.last_name' | t }}</label>
              <input
                type="text"
                name="customer[last_name]"
                id="LastName"
                placeholder="{{ 'customer.register.last_name' | t }}"
                {% if form.last_name %}
                  value="{{ form.last_name }}"
                {% endif %}
              >
            </div>

            <div class="float__wrapper">
              <label for="customer[note][NPI number]"
                >NPI or License Number
                <span style="display:inline-block;font-size:12px; padding: 0px 4px; background:#cc0000;color:white;margin-left:4px;"
                  >REQUIRED</span
                ></label
              >
              <input
                type="text"
                name="customer[note][NPI number]"
                id="NPI"
                placeholder="NPI or License Number"
                required
              >
            </div>

            <div class="float__wrapper">
              <label for="Email">{{ 'customer.register.email' | t }}</label>
              <input
                type="email"
                name="customer[email]"
                id="Email"
                placeholder="{{ 'customer.register.email' | t }}"
                {% if form.errors contains 'email' %}
                  class="error"
                {% elsif form.email %}
                  value="{{ form.email }}"
                {% endif %}
                autocorrect="off"
                autocapitalize="off"
              >
            </div>

            <div class="float__wrapper">
              <label for="CreatePassword">{{ 'customer.register.password' | t }}</label>
              <input
                type="password"
                name="customer[password]"
                id="CreatePassword"
                placeholder="{{ 'customer.register.password' | t }}"
                {% if form.errors contains 'password' %}
                  class="error"
                {% endif %}
              >
            </div>

            <button type="submit" class="btn--outline uppercase btn--full">
              {{ 'customer.register.submit' | t }}
            </button>
            <div class="form--additional">
              <a class="text-link uppercase" href="{{ routes.account_login_url }}">
                {{ 'layout.customer.log_in' | t }}
              </a>
            </div>
            <hr>
            <div class="form__legal">
              {{ 'shopify.online_store.spam_detection.disclaimer_html' | t }}
            </div>
          {% endform %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('#CreateCustomerForm'); // check actual id in HTML

    form.addEventListener(
      'submit',
      async function (e) {
        const npi = document.getElementById('NPI').value.trim();

        if (true) {
          e.stopImmediatePropagation();
          e.preventDefault();
        }
      },
      true
    );
  });
</script>
